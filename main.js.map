{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-webpack-project/./src/types/index.ts","webpack://my-webpack-project/./src/app.controller.ts","webpack://my-webpack-project/./src/components/base/api.ts","webpack://my-webpack-project/./src/utils/constants.ts","webpack://my-webpack-project/./src/services/api.service.ts","webpack://my-webpack-project/./src/services/api-order.service.ts","webpack://my-webpack-project/./src/services/api-products.service.ts","webpack://my-webpack-project/./src/services/basket.service.ts","webpack://my-webpack-project/./src/utils/utils.ts","webpack://my-webpack-project/./src/services/component-registry.service.ts","webpack://my-webpack-project/./src/services/modal.service.ts","webpack://my-webpack-project/./src/services/order.service.ts","webpack://my-webpack-project/./src/services/products.service.ts","webpack://my-webpack-project/./src/services/stateful-event-emitter.service.ts","webpack://my-webpack-project/./src/components/base/events.ts","webpack://my-webpack-project/./src/services/validation-order.service.ts","webpack://my-webpack-project/./src/components/features/di/di-symbols.ts","webpack://my-webpack-project/./src/components/features/di/di-container.ts","webpack://my-webpack-project/./src/components/features/di/di-inject.ts","webpack://my-webpack-project/./src/components/features/base/base.component.ts","webpack://my-webpack-project/./src/components/features/base/stateless.component.ts","webpack://my-webpack-project/./src/components/features/basket-card.component.ts","webpack://my-webpack-project/./src/components/features/basket-header.component.ts","webpack://my-webpack-project/./src/components/features/base/cached.component.ts","webpack://my-webpack-project/./src/components/features/basket.component.ts","webpack://my-webpack-project/./src/components/features/card-catalog.component.ts","webpack://my-webpack-project/./src/components/features/card-full.component.ts","webpack://my-webpack-project/./src/components/features/email-phone-order.component.ts","webpack://my-webpack-project/./src/components/features/gallery.component.ts","webpack://my-webpack-project/./src/components/features/modal.component.ts","webpack://my-webpack-project/./src/components/features/payment-address-order.component.ts","webpack://my-webpack-project/./src/components/features/succes-order.component.ts","webpack://my-webpack-project/./src/components/features/di/di-setup.ts","webpack://my-webpack-project/./src/index.ts"],"sourcesContent":["export var EventNames;\n(function (EventNames) {\n    EventNames[\"OPEN_CARD_FULL\"] = \"open-card-full\";\n    EventNames[\"BASKET\"] = \"basket\";\n    EventNames[\"OPEN_CART\"] = \"open-cart\";\n    EventNames[\"ORDER\"] = \"order\";\n    EventNames[\"OPEN_ORDER_ADDRESS_PAYMENT\"] = \"open-order-address-payment\";\n    EventNames[\"OPEN_ORDER_EMAIL_PHONE\"] = \"open-order-email-phone\";\n    EventNames[\"OPEN_SUCCESS_ORDER\"] = \"open-success-order\";\n    EventNames[\"EMAIL_INPUT\"] = \"email-input\";\n    EventNames[\"PHONE_INPUT\"] = \"phone-input\";\n    EventNames[\"ORDER_SUBMIT\"] = \"order-submit\";\n    EventNames[\"ORDER_CLEAR\"] = \"order-clear\";\n    EventNames[\"ORDER_CHANGED\"] = \"order-changed\";\n    EventNames[\"PRODUCTS_CHANGED\"] = \"products-changed\";\n})(EventNames || (EventNames = {}));\n","import { EventNames } from \"./types\";\n/**\n * Главный контроллер приложения, отвечающий за инициализацию и\n * координацию взаимодействия между сервисами, компонентами и модальными окнами.\n *\n * Основные обязанности:\n * - Загрузка списка продуктов и передача их в галерею для отображения.\n * - Подписка на кастомные события приложения для открытия соответствующих модальных окон.\n * - Обновление информации о корзине в шапке при изменениях.\n *\n * Этот класс служит точкой входа для запуска логики приложения\n * и организации реактивного взаимодействия между слоями.\n */\nexport class AppController {\n    constructor(_statefulEventEmitterService, _modalService, _galleryComponent, _basketHeaderComponent, _basketService, _cardFullComponent, _basketComponent, _paymentAddressOrderComponent, _emailPhoneOrderComponent, _successOrderComponent, _productsService) {\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n        this._modalService = _modalService;\n        this._galleryComponent = _galleryComponent;\n        this._basketHeaderComponent = _basketHeaderComponent;\n        this._basketService = _basketService;\n        this._cardFullComponent = _cardFullComponent;\n        this._basketComponent = _basketComponent;\n        this._paymentAddressOrderComponent = _paymentAddressOrderComponent;\n        this._emailPhoneOrderComponent = _emailPhoneOrderComponent;\n        this._successOrderComponent = _successOrderComponent;\n        this._productsService = _productsService;\n    }\n    /**\n     * Инициализирует приложение:\n     * - загружает продукты и отображает их в галерее;\n     * - устанавливает обработчики кастомных событий для управления модальными окнами и корзиной.\n     */\n    init() {\n        this._loadProductsAndRender();\n        this._initCustomEventListeners();\n    }\n    /**\n     * Загружает список продуктов через сервис-адаптер `ProductsService` и передаёт их в компонент галереи.\n     * Продукты реактивно передаются из модели (`StatefulEventEmitterService`), которая обновляется адаптером.\n     * Представление получает данные через адаптер, не взаимодействуя напрямую с API или моделью\n     */\n    _loadProductsAndRender() {\n        this._productsService.getAll((products) => {\n            this._galleryComponent.renderProductList(products);\n        });\n    }\n    /**\n     * Инициализирует подписки на кастомные события приложения.\n     * Обрабатывает открытие различных модальных окон и обновление корзины.\n     * @private\n     */\n    _initCustomEventListeners() {\n        this._statefulEventEmitterService.on(EventNames.OPEN_CARD_FULL, (product) => {\n            this._modalService.open(this._cardFullComponent.render(product));\n        });\n        this._basketService.onBasket(products => {\n            this._basketHeaderComponent.setQuantityProductsInBasket(products.length);\n        });\n        this._statefulEventEmitterService.on(EventNames.OPEN_CART, () => {\n            this._modalService.open(this._basketComponent);\n        });\n        this._statefulEventEmitterService.on(EventNames.OPEN_ORDER_ADDRESS_PAYMENT, () => {\n            this._modalService.open(this._paymentAddressOrderComponent);\n        });\n        this._statefulEventEmitterService.on(EventNames.OPEN_ORDER_EMAIL_PHONE, () => {\n            this._modalService.open(this._emailPhoneOrderComponent);\n        });\n        this._statefulEventEmitterService.on(EventNames.OPEN_SUCCESS_ORDER, (res) => {\n            this._modalService.open(this._successOrderComponent.render(res));\n        });\n    }\n}\n","export class Api {\n    constructor(baseUrl, options = {}) {\n        var _a;\n        this.baseUrl = baseUrl;\n        this.options = {\n            headers: Object.assign({ 'Content-Type': 'application/json' }, ((_a = options.headers) !== null && _a !== void 0 ? _a : {}))\n        };\n    }\n    get(uri) {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method: 'GET' })).then((this.handleResponse));\n    }\n    post(uri, data, method = 'POST') {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method, body: JSON.stringify(data) })).then((this.handleResponse));\n    }\n    handleResponse(response) {\n        if (response.ok)\n            return response.json();\n        else\n            return response.json()\n                .then(data => { var _a; return Promise.reject((_a = data.error) !== null && _a !== void 0 ? _a : response.statusText); });\n    }\n}\n","const API_ORIGIN = process.env.API_ORIGIN || 'https://larek-api.nomoreparties.com';\nexport const API_URL = `${API_ORIGIN}/api/weblarek`;\nexport const CDN_URL = `${API_ORIGIN}/content/weblarek`;\nexport const settings = {};\nexport const categoryCompareObj = {\n    'софт-скил': 'soft',\n    'дополнительное': 'additional',\n    'другое': 'other',\n    'кнопка': 'button',\n    'хард-скил': 'hard'\n};\n","import { Api } from \"../components/base/api\";\nimport { API_URL } from \"../utils/constants\";\n/**\n * Класс ApiService — конкретная реализация Api с фиксированным базовым URL.\n * Используется для взаимодействия с серверным API приложения.\n */\nexport class ApiService extends Api {\n    constructor() {\n        super(API_URL);\n    }\n}\n","import { ApiService } from \"./api.service\";\n/**\n * Сервис для работы с заказами через API.\n * Расширяет базовый ApiService, реализует метод отправки заказа.\n */\nexport class ApiOrderService extends ApiService {\n    constructor() {\n        super();\n    }\n    /**\n     * Отправить заказ на сервер.\n     * Выполняет POST-запрос по эндпоинту '/order' с данными заказа.\n     *\n     * @param createOrderRequest Объект с данными для создания заказа.\n     * @returns Промис, который разрешается ответом сервера с информацией о созданном заказе.\n     */\n    send(createOrderRequest) {\n        return this.post('/order', createOrderRequest);\n    }\n}\n","import { ApiService } from \"./api.service\";\n/**\n * Сервис для работы с продуктами через API.\n * Расширяет базовый ApiService, реализует методы получения списка продуктов и продукта по ID.\n */\nexport class ApiProductsService extends ApiService {\n    constructor() {\n        super();\n    }\n    /**\n     * Получить список всех продуктов.\n     * Выполняет GET-запрос по эндпоинту '/product' и возвращает массив продуктов.\n     *\n     * @returns Промис, который разрешается массивом продуктов.\n     */\n    getAll() {\n        return this.get('/product').then(productsResponse => productsResponse.items);\n    }\n    /**\n     * Получить продукт по его ID.\n     * Выполняет GET-запрос по эндпоинту '/product/{id}'.\n     *\n     * @param id Идентификатор продукта.\n     * @returns Промис, который разрешается объектом продукта.\n     */\n    getById(id) {\n        return this.get(`/product/${id}`);\n    }\n}\n","import { EventNames } from \"../types\";\n/**\n * Сервис корзины (BasketService) управляет списком товаров в корзине.\n * Все операции обновления и получения данных корзины выполняются\n * через StatefulEventEmitterService и события.\n */\nexport class BasketService {\n    constructor(_statefulEventEmitterService) {\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n    }\n    /**\n     * Получить все товары в корзине.\n     * Возвращает пустой массив, если корзина пуста.\n     * @returns {Product[]} Массив товаров в корзине.\n     */\n    getAll() {\n        const productsInBasket = this._statefulEventEmitterService.getLast(EventNames.BASKET);\n        if (productsInBasket === undefined) {\n            return [];\n        }\n        return productsInBasket;\n    }\n    /**\n     * Получить товар из корзины по его ID.\n     * @param {string} id Идентификатор товара.\n     * @returns {Product | undefined} Найденный товар или undefined, если не найден.\n     */\n    getById(id) {\n        const productsInBasket = this.getAll();\n        const product = productsInBasket.find(product => product.id === id);\n        return product;\n    }\n    /**\n     * Получить общую стоимость товаров в корзине.\n     * Суммирует поле price у всех товаров, учитывая, что цена может отсутствовать.\n     * @returns {number} Общая стоимость корзины.\n     */\n    getPriceBasket() {\n        const productsInBasket = this.getAll();\n        const price = productsInBasket.reduce((acc, product) => acc + (product.price || 0), 0);\n        return price;\n    }\n    /**\n     * Добавить товар в корзину.\n     * Если товар уже есть, добавление игнорируется.\n     * После добавления эмитит событие с обновлённым списком товаров,\n     * а также специальное событие добавления по ID товара.\n     * @param {Product} product Добавляемый товар.\n     */\n    add(product) {\n        const productsInBasket = this.getAll();\n        if (productsInBasket.find((item) => item.id === product.id)) {\n            return;\n        }\n        this._statefulEventEmitterService.emit(`add-card-to-basket-${product.id}`, product);\n        this._statefulEventEmitterService.offAllByEventName(`remove-card-to-basket-${product.id}`);\n        this._statefulEventEmitterService.emit(EventNames.BASKET, [...productsInBasket, product]);\n    }\n    /**\n     * Удалить товар из корзины.\n     * После удаления эмитит событие с обновлённым списком товаров,\n     * а также специальное событие удаления по ID товара.\n     * @param {Product} product Удаляемый товар.\n     */\n    remove(product) {\n        const productsInBasket = this.getAll();\n        const filteredProductsInBasket = productsInBasket.filter(item => item.id !== product.id);\n        this._statefulEventEmitterService.offAllByEventName(`add-card-to-basket-${product.id}`);\n        this._statefulEventEmitterService.emit(`remove-card-to-basket-${product.id}`, product);\n        this._statefulEventEmitterService.emit(EventNames.BASKET, filteredProductsInBasket);\n    }\n    /**\n     * Подписаться на обновления корзины.\n     * Вызывается при каждом изменении списка товаров.\n     * @param {(products: Product[]) => void} callback Коллбек с массивом товаров.\n     */\n    onBasket(callback) {\n        this._statefulEventEmitterService.on(EventNames.BASKET, callback);\n    }\n    /**\n     * Отписаться от обновлений корзины.\n     * @param {(products: Product[]) => void} callback Ранее добавленный обработчик.\n     */\n    offBasket(callback) {\n        this._statefulEventEmitterService.off(EventNames.BASKET, callback);\n    }\n    /**\n     * Подписаться на добавление конкретного товара по ID.\n     * Вызывается при добавлении этого товара в корзину.\n     * @param {string} id ID товара.\n     * @param {(product: Product) => void} callback Коллбек с товаром.\n     */\n    onBasketById(id, callback) {\n        this._statefulEventEmitterService.on(`add-card-to-basket-${id}`, callback);\n    }\n    /**\n     * Отписаться от событий добавления конкретного товара по ID.\n     * Удаляет все обработчики для события добавления товара с данным ID.\n     * @param {string} id ID товара.\n     */\n    offBasketById(id) {\n        this._statefulEventEmitterService.offAllByEventName(`add-card-to-basket-${id}`);\n    }\n    /**\n     * Очистить корзину — удалить все товары.\n     * Эмитит событие с пустым списком.\n     */\n    clear() {\n        this._statefulEventEmitterService.emit(EventNames.BASKET, []);\n    }\n}\n","import { categoryCompareObj, CDN_URL } from \"./constants\";\nexport function pascalToKebab(value) {\n    return value.replace(/([a-z0–9])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\nexport function isSelector(x) {\n    return (typeof x === \"string\") && x.length > 1;\n}\nexport function isEmpty(value) {\n    return value === null || value === undefined;\n}\nexport function ensureAllElements(selectorElement, context = document) {\n    if (isSelector(selectorElement)) {\n        return Array.from(context.querySelectorAll(selectorElement));\n    }\n    if (selectorElement instanceof NodeList) {\n        return Array.from(selectorElement);\n    }\n    if (Array.isArray(selectorElement)) {\n        return selectorElement;\n    }\n    throw new Error(`Unknown selector element`);\n}\nexport function ensureElement(selectorElement, context) {\n    if (isSelector(selectorElement)) {\n        const elements = ensureAllElements(selectorElement, context);\n        if (elements.length > 1) {\n            console.warn(`selector ${selectorElement} return more then one element`);\n        }\n        if (elements.length === 0) {\n            throw new Error(`selector ${selectorElement} return nothing`);\n        }\n        return elements.pop();\n    }\n    if (selectorElement instanceof HTMLElement) {\n        return selectorElement;\n    }\n    throw new Error('Unknown selector element');\n}\nexport function cloneTemplate(query) {\n    const template = ensureElement(query);\n    return template.content.firstElementChild.cloneNode(true);\n}\nexport function bem(block, element, modifier) {\n    let name = block;\n    if (element)\n        name += `__${element}`;\n    if (modifier)\n        name += `_${modifier}`;\n    return {\n        name,\n        class: `.${name}`\n    };\n}\nexport function getObjectProperties(obj, filter) {\n    return Object.entries(Object.getOwnPropertyDescriptors(Object.getPrototypeOf(obj)))\n        .filter(([name, prop]) => filter ? filter(name, prop) : (name !== 'constructor'))\n        .map(([name, prop]) => name);\n}\n/**\n * Устанавливает dataset атрибуты элемента\n */\nexport function setElementData(el, data) {\n    for (const key in data) {\n        el.dataset[key] = String(data[key]);\n    }\n}\n/**\n * Получает типизированные данные из dataset атрибутов элемента\n */\nexport function getElementData(el, scheme) {\n    const data = {};\n    for (const key in el.dataset) {\n        data[key] = scheme[key](el.dataset[key]);\n    }\n    return data;\n}\n/**\n * Проверка на простой объект\n */\nexport function isPlainObject(obj) {\n    const prototype = Object.getPrototypeOf(obj);\n    return prototype === Object.getPrototypeOf({}) ||\n        prototype === null;\n}\nexport function isBoolean(v) {\n    return typeof v === 'boolean';\n}\n/**\n * Фабрика DOM-элементов в простейшей реализации\n * здесь не учтено много факторов\n * в интернет можно найти более полные реализации\n */\nexport function createElement(tagName, props, children) {\n    const element = document.createElement(tagName);\n    if (props) {\n        for (const key in props) {\n            const value = props[key];\n            if (isPlainObject(value) && key === 'dataset') {\n                setElementData(element, value);\n            }\n            else {\n                // @ts-expect-error fix indexing later\n                element[key] = isBoolean(value) ? value : String(value);\n            }\n        }\n    }\n    if (children) {\n        for (const child of Array.isArray(children) ? children : [children]) {\n            element.append(child);\n        }\n    }\n    return element;\n}\nexport function getProductPriceText(price) {\n    return price === null ? 'Бесценно' : `${price} синапсов`;\n}\nexport function getProductPrice(price) {\n    return price === null ? 0 : price;\n}\nexport function getProductCategoryCssClass(category) {\n    for (const categoryItem in categoryCompareObj) {\n        if (categoryItem === category)\n            return `card__category_${categoryCompareObj[category]}`;\n    }\n    return `card__category_${categoryCompareObj['другое']}`;\n}\nexport function getCdnImgUrl(img) {\n    return `${CDN_URL}/${img}`;\n}\nexport function hashCode(obj) {\n    return (Math.random() * 1e9 >>> 0).toString(36);\n}\n","import { hashCode } from \"../utils/utils\";\nexport class ComponentRegistryService {\n    constructor() {\n        this._byInstance = new WeakMap();\n        this._byElement = new WeakMap();\n        this._listeners = new Map();\n    }\n    register(instance, element) {\n        const id = this._generateId(instance);\n        const info = { instance, element, id };\n        this._byInstance.set(instance, info);\n        this._byElement.set(element, info);\n        element.dataset.componentId = id;\n        const listeners = this._listeners.get(id);\n        if (listeners) {\n            listeners.forEach(cb => cb());\n            this._listeners.delete(id);\n        }\n    }\n    getByInstance(instance) {\n        return this._byInstance.get(instance);\n    }\n    getByElement(element) {\n        return this._byElement.get(element);\n    }\n    onRegisteredByInstance(instance, callback) {\n        const info = this.getByInstance(instance);\n        if (info)\n            return callback();\n        const id = this._generateId(instance);\n        if (!this._listeners.has(id))\n            this._listeners.set(id, new Set());\n        this._listeners.get(id).add(callback);\n    }\n    _generateId(instance) {\n        return (instance.constructor.name || 'Component') + '_' + hashCode(instance);\n    }\n}\n","export class ModalService {\n    constructor(_modalComponent, _componentRegistryService) {\n        this._modalComponent = _modalComponent;\n        this._componentRegistryService = _componentRegistryService;\n        this._currentModal = null;\n        this._onCloseListeners = new Map();\n        this._pendingCloseListeners = new WeakMap();\n        this._pendingCloseOnceListeners = new WeakMap();\n        this._isProgrammaticClose = false;\n    }\n    open(content, renderArgs, options) {\n        var _a;\n        const element = this._resolveElement(content, renderArgs);\n        if (this._currentModal) {\n            this._handleModalClose(this._currentModal);\n            this._invokeRegularCloseCallbacks(this._currentModal.element);\n        }\n        const onceListeners = this._collectPendingOnceListeners(content);\n        const regularListeners = this._collectPendingRegularListeners(content);\n        let component = this._isComponent(content)\n            ? content\n            : (_a = this._componentRegistryService.getByElement(content)) === null || _a === void 0 ? void 0 : _a.instance;\n        this._currentModal = {\n            element,\n            component,\n            onClose: options === null || options === void 0 ? void 0 : options.onClose,\n        };\n        this._modalComponent.open(element, {\n            onOpen: options === null || options === void 0 ? void 0 : options.onOpen,\n            onClose: () => {\n                // Только ручное закрытие должно приводить к сбросу currentModal\n                if (!this._isProgrammaticClose) {\n                    this._handleModalClose(this._currentModal);\n                    this._invokeRegularCloseCallbacks(element);\n                    onceListeners.forEach((cb) => cb());\n                    this._currentModal = null;\n                }\n            },\n        });\n        if (regularListeners.length > 0) {\n            if (!this._onCloseListeners.has(element)) {\n                this._onCloseListeners.set(element, new Set());\n            }\n            const set = this._onCloseListeners.get(element);\n            regularListeners.forEach((cb) => set.add(cb));\n        }\n    }\n    close(content) {\n        if (!this._currentModal)\n            return;\n        if (this._isComponent(content)) {\n            if (this._currentModal.component !== content)\n                return;\n        }\n        else {\n            if (this._currentModal.element !== content)\n                return;\n        }\n        // Программное закрытие\n        this._isProgrammaticClose = true;\n        this._modalComponent.close();\n        this._isProgrammaticClose = false;\n        this._handleModalClose(this._currentModal);\n        this._invokeRegularCloseCallbacks(this._currentModal.element);\n        // НЕ обнуляем _currentModal — это должен делать только onClose при ручном закрытии\n        // Если хочешь — можно добавить опцию, чтобы close() по желанию обнулял currentModal\n    }\n    onClose(target, callback) {\n        setTimeout(() => {\n            const element = this._getElementIfOpen(target);\n            if (element) {\n                if (!this._onCloseListeners.has(element)) {\n                    this._onCloseListeners.set(element, new Set());\n                }\n                this._onCloseListeners.get(element).add(callback);\n            }\n            else {\n                this._addPendingListener(this._pendingCloseListeners, target, callback);\n            }\n        }, 0);\n    }\n    onCloseOnce(target, callback) {\n        setTimeout(() => {\n            // Мы всегда добавляем в pending, потому что onCloseOnce должен быть вызван ТОЛЬКО вручную\n            this._addPendingListener(this._pendingCloseOnceListeners, target, callback);\n        }, 0);\n    }\n    _invokeRegularCloseCallbacks(element) {\n        const regular = this._onCloseListeners.get(element);\n        regular === null || regular === void 0 ? void 0 : regular.forEach((cb) => cb());\n    }\n    _handleModalClose(modal) {\n        var _a;\n        (_a = modal === null || modal === void 0 ? void 0 : modal.onClose) === null || _a === void 0 ? void 0 : _a.call(modal);\n    }\n    _resolveElement(content, renderArgs) {\n        if (this._isComponent(content)) {\n            const args = Array.isArray(renderArgs) ? renderArgs : [renderArgs];\n            return content.render(...args);\n        }\n        return content;\n    }\n    _isComponent(obj) {\n        return typeof (obj === null || obj === void 0 ? void 0 : obj.render) === 'function';\n    }\n    _getElementIfOpen(content) {\n        if (!this._currentModal)\n            return null;\n        if (this._isComponent(content)) {\n            return this._currentModal.component === content ? this._currentModal.element : null;\n        }\n        return this._currentModal.element === content ? content : null;\n    }\n    _addPendingListener(storage, target, callback) {\n        if (!storage.has(target)) {\n            storage.set(target, new Set());\n        }\n        storage.get(target).add(callback);\n    }\n    _collectPendingRegularListeners(target) {\n        const listeners = this._pendingCloseListeners.get(target);\n        if (!listeners)\n            return [];\n        this._pendingCloseListeners.delete(target);\n        return Array.from(listeners);\n    }\n    _collectPendingOnceListeners(target) {\n        const listeners = this._pendingCloseOnceListeners.get(target);\n        if (!listeners)\n            return [];\n        this._pendingCloseOnceListeners.delete(target);\n        return Array.from(listeners);\n    }\n}\n","import { EventNames } from \"../types\";\n/**\n * Сервис заказа (OrderService) реализует логику работы с заказом.\n * Взаимодействует со слоями через StatefulEventEmitterService,\n * используя пользовательские события.\n */\nexport class OrderService {\n    constructor(_statefulEventEmitterService, _validationOrderService, _apiOrderService, _basketService) {\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n        this._validationOrderService = _validationOrderService;\n        this._apiOrderService = _apiOrderService;\n        this._basketService = _basketService;\n    }\n    get isValid() {\n        const order = Object.assign({}, this._getCurrentOrder());\n        const result = this._validationOrderService.validate(order, ['email', 'phone', 'address']);\n        return result.isValid;\n    }\n    updateEmail(email) {\n        this._emitOrderUpdate({ email });\n    }\n    updatePhone(phone) {\n        this._emitOrderUpdate({ phone });\n    }\n    setAddress(address) {\n        this._emitOrderUpdate({ address });\n    }\n    setPaymentMethod(payment) {\n        this._emitOrderUpdate({ payment });\n    }\n    clear() {\n        this._statefulEventEmitterService.clearLast(EventNames.ORDER_CHANGED);\n    }\n    onFormStateChange(fields, callback) {\n        let hasChanged = false;\n        const handler = (order) => {\n            const hasAnyField = fields.some((field) => order[field] !== undefined && order[field] !== '');\n            if (!hasAnyField && !hasChanged)\n                return;\n            hasChanged = true;\n            const result = this._validationOrderService.validate(order, fields);\n            callback(result);\n        };\n        this._statefulEventEmitterService.on(EventNames.ORDER_CHANGED, handler);\n        return () => {\n            this._statefulEventEmitterService.off(EventNames.ORDER_CHANGED, handler);\n        };\n    }\n    submit() {\n        const order = Object.assign({}, this._getCurrentOrder());\n        order.items = this._basketService.getAll().map((p) => p.id);\n        order.total = this._basketService.getPriceBasket();\n        if (!this.isValid) {\n            alert('Форма содержит ошибки');\n            const result = this._validationOrderService.validate(order, ['email', 'phone', 'address']);\n            console.warn('Ошибки при сабмите:', result.errors);\n            return;\n        }\n        this._apiOrderService.send(order)\n            .then((res) => {\n            this._statefulEventEmitterService.emit(EventNames.OPEN_SUCCESS_ORDER, res);\n        })\n            .catch((err) => {\n            console.error(err);\n            alert('Ошибка при отправке заказа');\n        });\n    }\n    _emitOrderUpdate(partialOrder) {\n        const currentOrder = this._getCurrentOrder();\n        const newOrder = Object.assign(Object.assign({}, currentOrder), partialOrder);\n        this._statefulEventEmitterService.emit(EventNames.ORDER_CHANGED, newOrder);\n    }\n    _getCurrentOrder() {\n        var _a;\n        return (_a = this._statefulEventEmitterService.getLast(EventNames.ORDER_CHANGED)) !== null && _a !== void 0 ? _a : {};\n    }\n}\n","import { EventNames } from \"../types\";\n/**\n * Сервис модели для работы с продуктами.\n *\n * Основные обязанности:\n * - Загружает данные о продуктах с API.\n * - Хранит последнее состояние полученных данных.\n * - Рассылает изменения подписчикам через событийную шину (`StatefulEventEmitterService`).\n * - Позволяет реактивно или лениво подписаться на данные с возможностью отмены ожидания.\n *\n * Архитектурная роль:\n * - Является моделью данных для продуктов в терминах паттерна MV*.\n * - Представление (например, компонент галереи) не взаимодействует напрямую с API,\n *   а обращается к сервису модели, получая данные через `getAll()`.\n * - Это обеспечивает разделение ответственности: данные загружаются и управляются здесь,\n *   а представление только подписывается или ждёт результат.\n *\n * Преимущества:\n * - Централизованное хранение и распространение состояния.\n * - Унифицированный интерфейс подписки и отписки.\n * - Готов к расширению: можно добавить фильтрацию, кеширование, ошибки и т. д.\n */\nexport class ProductsService {\n    constructor(_apiProductsService, _statefulEventEmitterService) {\n        this._apiProductsService = _apiProductsService;\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n    }\n    /**\n     * Загружает список продуктов с API, эмитит событие об обновлении продуктов и подписывается на изменения.\n     *\n     * @param callback Функция, которая вызывается при каждом обновлении списка продуктов.\n     * @param onDestroy Опциональная функция, принимающая колбэк для отписки от события.\n     *                  Колбэк нужно вызвать, чтобы прекратить подписку (например, при размонтировании компонента).\n     */\n    getAll(callback, onDestroy) {\n        this._apiProductsService.getAll()\n            .then(products => {\n            // Сразу эмитируем полученные продукты\n            this._update(products);\n            const _callback = (products) => {\n                callback(products);\n            };\n            // Подписываемся на обновления через callback\n            this._statefulEventEmitterService.on(EventNames.PRODUCTS_CHANGED, _callback);\n            // Позволяем внешнему коду отписаться при необходимости\n            if (onDestroy) {\n                onDestroy(() => {\n                    this._statefulEventEmitterService.off(EventNames.PRODUCTS_CHANGED, _callback);\n                });\n            }\n        })\n            .catch(error => {\n            console.error('Ошибка при попытке загрузить список товаров', error);\n        });\n    }\n    /**\n     * Эмитит событие об обновлении продуктов\n     * @param products Список продуктов\n     */\n    _update(products) {\n        this._statefulEventEmitterService.emit(EventNames.PRODUCTS_CHANGED, products);\n    }\n}\n","import { EventEmitter } from \"../components/base/events\";\n/**\n * StatefulEventEmitterService — расширение EventEmitter,\n * которое сохраняет последнее значение каждого события.\n * При подписке сразу вызывает обработчик с последним сохранённым значением.\n */\nexport class StatefulEventEmitterService extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this._lastValues = new Map();\n    }\n    /**\n     * Переопределение emit для сохранения последнего значения события.\n     * @param eventName Имя события.\n     * @param data Данные события.\n     */\n    emit(eventName, data) {\n        this._lastValues.set(eventName, data);\n        super.emit(eventName, data);\n    }\n    /**\n     * Переопределение on для вызова обработчика сразу с последним значением.\n     * @param eventName Имя события.\n     * @param callback Обработчик события.\n     */\n    on(eventName, callback) {\n        super.on(eventName, callback);\n        if (typeof eventName === 'string' && this._lastValues.has(eventName)) {\n            const lastValue = this._lastValues.get(eventName);\n            callback(lastValue);\n        }\n    }\n    /**\n     * Удалить всех подписчиков указанного события и сбросить последнее значение.\n     * @param eventName Имя события.\n     */\n    offAllByEventName(eventName) {\n        this._events.delete(eventName);\n        if (typeof eventName === 'string') {\n            this._lastValues.delete(eventName);\n        }\n    }\n    /**\n     * Получить последнее значение события.\n     * @param eventName Имя события.\n     * @returns Последние данные события, либо undefined.\n     */\n    getLast(eventName) {\n        return this._lastValues.get(eventName);\n    }\n    /**\n     * Очистить сохранённые значения события или всех событий.\n     * @param eventName Имя события, если нужно очистить конкретное.\n     */\n    clearLast(eventName) {\n        if (eventName) {\n            this._lastValues.delete(eventName);\n        }\n        else {\n            this._lastValues.clear();\n        }\n    }\n}\n","/**\n * Брокер событий, классическая реализация\n * В расширенных вариантах есть возможность подписаться на все события\n * или слушать события по шаблону например\n */\nexport class EventEmitter {\n    constructor() {\n        this._events = new Map();\n    }\n    /**\n     * Установить обработчик на событие\n     */\n    on(eventName, callback) {\n        var _a;\n        if (!this._events.has(eventName)) {\n            this._events.set(eventName, new Set());\n        }\n        (_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.add(callback);\n    }\n    /**\n     * Снять обработчик с события\n     */\n    off(eventName, callback) {\n        var _a;\n        if (this._events.has(eventName)) {\n            this._events.get(eventName).delete(callback);\n            if (((_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.size) === 0) {\n                this._events.delete(eventName);\n            }\n        }\n    }\n    /**\n     * Инициировать событие с данными\n     */\n    emit(eventName, data) {\n        this._events.forEach((subscribers, name) => {\n            if (name === '*')\n                subscribers.forEach(callback => callback({\n                    eventName,\n                    data\n                }));\n            if (name instanceof RegExp && name.test(eventName) || name === eventName) {\n                subscribers.forEach(callback => callback(data));\n            }\n        });\n    }\n    /**\n     * Слушать все события\n     */\n    onAll(callback) {\n        this.on(\"*\", callback);\n    }\n    /**\n     * Сбросить все обработчики\n     */\n    offAll() {\n        this._events = new Map();\n    }\n    /**\n     * Сделать коллбек триггер, генерирующий событие при вызове\n     */\n    trigger(eventName, context) {\n        return (event = {}) => {\n            this.emit(eventName, Object.assign(Object.assign({}, (event || {})), (context || {})));\n        };\n    }\n}\n","/**\n * Сервис валидации данных заказа.\n * Позволяет проверить указанные поля объекта заказа и вернуть ошибки.\n */\nexport class ValidationOrderService {\n    /**\n     * Проверяет валидность указанных полей заказа.\n     * Для каждого поля вызывает приватный метод проверки.\n     *\n     * @param order Объект с данными заказа (частичный).\n     * @param fields Массив ключей полей, которые нужно валидировать.\n     * @returns Объект с результатом валидации:\n     * - isValid — true, если ошибок нет.\n     * - errors — объект с сообщениями ошибок по каждому полю.\n     */\n    validate(order, fields) {\n        const errors = {};\n        for (const field of fields) {\n            const error = this._validateField(field, order[field]);\n            if (error)\n                errors[field] = error;\n        }\n        const isValid = Object.keys(errors).length === 0;\n        return { isValid, errors };\n    }\n    /**\n     * Приватный метод проверки конкретного поля заказа.\n     * Возвращает строку с ошибкой или null, если ошибок нет.\n     *\n     * @param field Имя поля.\n     * @param value Значение поля.\n     * @returns Сообщение об ошибке или null.\n     * @private\n     */\n    _validateField(field, value) {\n        switch (field) {\n            case 'email':\n                if (!value)\n                    return 'Необходимо указать email';\n                return null;\n            case 'phone':\n                if (!value)\n                    return 'Необходимо указать телефон';\n                return null;\n            case 'address':\n                if (!value)\n                    return 'Необходимо указать адрес';\n                return null;\n            default:\n                return null;\n        }\n    }\n}\n","export const DI_INIT = Symbol('di_init');\n","import { DI_INIT } from \"./di-symbols\";\n/**\n * Контейнер для управления зависимостями (DI) с поддержкой синглтонов и transient-сервисов.\n */\nclass DIContainer {\n    constructor() {\n        /** Реестр зарегистрированных провайдеров */\n        this._registry = new Map();\n        /** Хранилище синглтон-экземпляров */\n        this._singletons = new Map();\n    }\n    /**\n     * Регистрирует провайдера для класса.\n     * @template T Тип создаваемого экземпляра.\n     * @param key Конструктор класса, который регистрируется.\n     * @param DIProvider Параметры провайдера (класс, зависимости, область).\n     * @throws Ошибка, если количество зависимостей не совпадает с количеством параметров конструктора.\n     */\n    register(key, DIProvider) {\n        var _a, _b, _c;\n        const name = key.name;\n        const useClass = (DIProvider === null || DIProvider === void 0 ? void 0 : DIProvider.useClass) || key;\n        const deps = (_b = (_a = DIProvider === null || DIProvider === void 0 ? void 0 : DIProvider.deps) !== null && _a !== void 0 ? _a : useClass.inject) !== null && _b !== void 0 ? _b : [];\n        // Проверка соответствия количества параметров\n        const expectedLength = useClass.length;\n        if (expectedLength !== deps.length) {\n            throw new Error(`Invalid registration for '${name}': DIConstructor expects ${expectedLength} dependencies, but got ${deps.length}`);\n        }\n        this._registry.set(name, {\n            useClass,\n            deps,\n            scope: (_c = DIProvider === null || DIProvider === void 0 ? void 0 : DIProvider.scope) !== null && _c !== void 0 ? _c : 'singleton',\n        });\n    }\n    /**\n     * Разрешает (создаёт) экземпляр зависимости по имени или конструктору.\n     * Для синглтонов возвращает один и тот же экземпляр, для transient — новый.\n     * @template T Тип создаваемого экземпляра.\n     * @param key Имя класса или сам конструктор.\n     * @returns Экземпляр запрошенной зависимости.\n     * @throws Ошибка, если зависимость не зарегистрирована.\n     */\n    resolve(key) {\n        const name = typeof key === 'string' ? key : key.name;\n        const DIProvider = this._registry.get(name);\n        if (!DIProvider) {\n            throw new Error(`Dependency '${name}' is not registered.`);\n        }\n        if (DIProvider.scope !== 'transient' && this._singletons.has(name)) {\n            return this._singletons.get(name);\n        }\n        const dependencies = (DIProvider.deps || []).map(dep => this.resolve(dep));\n        const instance = new DIProvider.useClass(...dependencies);\n        // только контейнер знает про этот Symbol\n        if (typeof instance[DI_INIT] === 'function') {\n            instance[DI_INIT]();\n        }\n        if (DIProvider.scope !== 'transient') {\n            this._singletons.set(name, instance);\n        }\n        return instance;\n    }\n}\n/** Глобальный контейнер зависимостей */\nexport const container = new DIContainer();\n","import { container } from \"./di-container\";\nexport function inject(key) {\n    return container.resolve(key);\n}\n","import { ComponentRegistryService } from \"../../../services/component-registry.service\";\nimport { cloneTemplate } from \"../../../utils/utils\";\nimport { inject } from \"../di/di-inject\";\n/**\n * Базовый абстрактный компонент\n */\nexport class BaseComponent {\n    constructor(template) {\n        this._template = template;\n        this._componentRegistryService = inject(ComponentRegistryService);\n    }\n    _cloneTemplate() {\n        const element = cloneTemplate(this._template);\n        return this._registerElement(element);\n    }\n    _registerElement(element) {\n        this._componentRegistryService.register(this, element);\n        return element;\n    }\n}\n","import { BaseComponent } from \"./base.component\";\n/**\n * Не кэшируемый компонент — каждый вызов render возвращает новый элемент\n */\nexport class StatelessComponent extends BaseComponent {\n}\n","import { getProductPriceText } from \"../../utils/utils\";\nimport { StatelessComponent } from \"./base/stateless.component\";\n/**\n * Компонент карточки товара в корзине.\n *\n * Отвечает за создание HTML-элемента списка товара в корзине,\n * заполнение его данными и обработку удаления товара из корзины.\n */\nexport class BasketCardComponent extends StatelessComponent {\n    constructor(_basketService) {\n        super(document.querySelector('#card-basket'));\n        this._basketService = _basketService;\n        /**\n         * Обработчик удаления товара из корзины.\n         * Вызывает метод сервиса корзины для удаления переданного товара.\n         *\n         * @param product - товар, который нужно удалить из корзины\n         */\n        this._deleteProduct = (product) => {\n            this._basketService.remove(product);\n        };\n    }\n    render(product, index) {\n        const basketCardElement = this._cloneTemplate();\n        const basketItemIndexElemet = basketCardElement.querySelector('.basket__item-index');\n        const basketItemTitleElement = basketCardElement.querySelector('.card__title');\n        const basketItemPriceElement = basketCardElement.querySelector('.card__price');\n        const basketItemDeleteBtnElement = basketCardElement.querySelector('.basket__item-delete');\n        basketItemIndexElemet.textContent = `${index + 1}`;\n        basketItemTitleElement.textContent = product.title;\n        basketItemPriceElement.textContent = getProductPriceText(product.price);\n        basketItemDeleteBtnElement.addEventListener('click', () => this._deleteProduct(product));\n        return basketCardElement;\n    }\n}\n","import { EventNames } from \"../../types\";\n/**\n * Компонент для отображения состояния корзины в шапке сайта.\n *\n * Отвечает за отображение количества товаров в корзине и\n * обработку клика по иконке корзины для открытия корзины.\n */\nexport class BasketHeaderComponent {\n    constructor(_statefulEventEmitterService) {\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n        this._headerBasketElement = document.querySelector('.header__basket');\n        this._counterElement = this._headerBasketElement.querySelector('.header__basket-counter');\n        this._initEventListeners();\n    }\n    /**\n     * Обновляет отображаемое количество товаров в корзине.\n     *\n     * @param quantity - количество товаров для отображения\n     */\n    setQuantityProductsInBasket(quantity) {\n        this._counterElement.textContent = String(quantity);\n    }\n    /**\n     * Инициализирует обработчики событий компонента,\n     * в частности навешивает обработчик клика на иконку корзины,\n     * который инициирует событие открытия корзины через EventEmitter.\n     */\n    _initEventListeners() {\n        this._headerBasketElement.addEventListener('click', (event) => {\n            this._statefulEventEmitterService.emit(EventNames.OPEN_CART);\n        });\n    }\n}\n","import { DI_INIT } from \"../di/di-symbols\";\nimport { BaseComponent } from \"./base.component\";\n/**\n * Кэшируемый компонент (рендерит только один раз, затем возвращает сохранённый элемент)\n */\nexport class CachedComponent extends BaseComponent {\n    constructor(template) {\n        super(template);\n        this._cachedElement = this._cloneTemplate();\n        this._cachedData = this._initCachedData();\n        this._isRegistered = false;\n        this[DI_INIT] = () => {\n            this._afterInit();\n        };\n    }\n    render(...args) {\n        this._update(...args);\n        if (!this._isRegistered) {\n            this._cachedElement = this._registerElement(this._cachedElement);\n            this._isRegistered = true;\n        }\n        return this._cachedElement;\n    }\n    _afterInit() {\n        // Переопределяется при необходимости\n    }\n    _update(...args) {\n        // Переопределяется при необходимости\n    }\n}\n","import { EventNames } from \"../../types\";\nimport { CachedComponent } from \"./base/cached.component\";\n/**\n * Компонент представления корзины, реализующий слой **View** в архитектуре MVVM (или MVP).\n *\n * Отвечает исключительно за отображение содержимого корзины и взаимодействие с DOM-элементами,\n * не содержит бизнес-логики, не хранит состояния и не взаимодействует напрямую ни с моделью,\n * ни с контроллером. Получает данные и инструкции исключительно через события.\n *\n *  Архитектурные особенности:\n *\n * - Использует `StatefulEventEmitterService` (реализация паттерна **EventEmitter**) для подписки на события и инициации пользовательских событий.\n * - Не создает экземпляры модели или контроллера, не зависит от них напрямую.\n * - Не валидирует данные, не изменяет модель, а только реагирует на изменения и инициирует переходы состояний.\n * - Подписывается на события изменения состояния корзины (`EventNames.BASKET`) и перерисовывает DOM при каждом обновлении.\n * - Вызывает событие `EventNames.OPEN_ORDER_ADDRESS_PAYMENT` при нажатии на кнопку оформления заказа, не передавая никаких данных напрямую.\n * - Отписывается от событий при закрытии модального окна (через this._modalService.onClose), избегая утечек памяти.\n *\n */\nexport class BasketComponent extends CachedComponent {\n    constructor(_basketService, _basketCardComponent, _statefulEventEmitterService, _modalService) {\n        super(document.querySelector('#basket'));\n        this._basketService = _basketService;\n        this._basketCardComponent = _basketCardComponent;\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n        this._modalService = _modalService;\n    }\n    _initCachedData() {\n        return {\n            basketElement: this._cachedElement,\n            listElement: this._cachedElement.querySelector('.basket__list'),\n            priceElement: this._cachedElement.querySelector('.basket__price'),\n            submitBtnElement: this._cachedElement.querySelector('.basket__button')\n        };\n    }\n    _afterInit() {\n        const { listElement, priceElement, submitBtnElement } = this._cachedData;\n        const getPriceBasket = () => this._basketService.getPriceBasket();\n        const renderAll = (products = []) => {\n            listElement.textContent = '';\n            this._renderActionsInfo(submitBtnElement, priceElement, listElement, getPriceBasket());\n            this._appendBasketElements(listElement, products);\n        };\n        renderAll();\n        const onBasketCallback = (products) => renderAll(products);\n        this._basketService.onBasket(onBasketCallback);\n        submitBtnElement.addEventListener('click', () => {\n            this._statefulEventEmitterService.emit(EventNames.OPEN_ORDER_ADDRESS_PAYMENT);\n        });\n    }\n    /**\n     * Вспомогательный метод для добавления DOM-элементов товаров в список корзины.\n     *\n     * @param listElement - контейнер списка корзины\n     * @param products - массив продуктов, которые необходимо отобразить\n     */\n    _appendBasketElements(listElement, products) {\n        listElement.textContent = '';\n        for (let i = 0; i < products.length; i++) {\n            const basketCardElement = this._basketCardComponent.render(products[i], i);\n            listElement.appendChild(basketCardElement);\n        }\n    }\n    /**\n     * Вспомогательный метод для обновления информации о стоимости корзины,\n     * а также управления состоянием кнопки оформления и отображением пустой корзины.\n     *\n     * @param submitBtnElement - кнопка оформления заказа\n     * @param priceElement - элемент для отображения общей стоимости\n     * @param listElement - контейнер списка корзины\n     * @param priceBasket - сумма стоимости товаров в корзине\n     */\n    _renderActionsInfo(submitBtnElement, priceElement, listElement, priceBasket) {\n        submitBtnElement.disabled = priceBasket === 0;\n        priceElement.textContent = `${priceBasket} синапсов`;\n        if (priceBasket === 0) {\n            const listItemEmptyElement = document.createElement('div');\n            listItemEmptyElement.classList.add('basket__list-empty');\n            listItemEmptyElement.textContent = 'Корзина пуста';\n            listElement.appendChild(listItemEmptyElement);\n        }\n    }\n}\n","import { EventNames } from \"../../types\";\nimport { getCdnImgUrl, getProductCategoryCssClass, getProductPriceText } from \"../../utils/utils\";\nimport { StatelessComponent } from \"./base/stateless.component\";\n/**\n * Компонент карточки продукта в галерее.\n *\n * Отвечает за создание DOM-элемента карточки продукта,\n * заполнение его данными продукта и генерацию события при клике.\n */\nexport class CardCatalogComponent extends StatelessComponent {\n    constructor(_statefulEventEmitterService) {\n        super(document.querySelector('#card-catalog'));\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n        /**\n         * Обработчик клика по карточке, который инициирует событие открытия полной информации о продукте.\n         *\n         * @param product - продукт, связанный с данной карточкой\n         */\n        this._cardCatalogClick = (product) => {\n            this._statefulEventEmitterService.emit(EventNames.OPEN_CARD_FULL, product);\n        };\n    }\n    render(product) {\n        const cardCatalogElement = this._cloneTemplate();\n        const cardCategory = cardCatalogElement.querySelector('.card__category');\n        const cardTitle = cardCatalogElement.querySelector('.card__title');\n        const cardImg = cardCatalogElement.querySelector('.card__image');\n        const cardPrice = cardCatalogElement.querySelector('.card__price');\n        cardCategory.textContent = product.category;\n        cardCategory.classList.remove('card__category_soft');\n        cardCategory.classList.add(getProductCategoryCssClass(product.category));\n        cardTitle.textContent = product.title;\n        cardImg.alt = product.title;\n        cardImg.src = getCdnImgUrl(product.image);\n        cardPrice.textContent = getProductPriceText(product.price);\n        cardCatalogElement.addEventListener('click', () => this._cardCatalogClick(product));\n        return cardCatalogElement;\n    }\n}\n","import { getCdnImgUrl, getProductCategoryCssClass, getProductPriceText } from \"../../utils/utils\";\nimport { CachedComponent } from \"./base/cached.component\";\n/**\n * Компонент полной карточки товара с подробной информацией.\n *\n * Основные обязанности:\n * - Отображать данные товара: категория, название, изображение и цену.\n * - Управлять состоянием кнопки добавления/удаления товара из корзины,\n *   учитывая, доступен ли товар (цена не null) и находится ли он уже в корзине.\n * - Обрабатывать клики по кнопке для добавления или удаления товара из корзины,\n *   синхронизируя состояние с BasketService.\n */\nexport class CardFullComponent extends CachedComponent {\n    constructor(_basketService) {\n        super(document.querySelector('#card-preview'));\n        this._basketService = _basketService;\n    }\n    _initCachedData() {\n        return {\n            category: this._cachedElement.querySelector('.card__category'),\n            title: this._cachedElement.querySelector('.card__title'),\n            img: this._cachedElement.querySelector('.card__image'),\n            price: this._cachedElement.querySelector('.card__price'),\n            btn: this._cachedElement.querySelector('.card__button'),\n            product: null\n        };\n    }\n    _afterInit() {\n        this._cachedData.category.classList.remove('card__category_soft');\n        this._cachedData.btn.addEventListener('click', () => {\n            if (this._cachedData.product !== null) {\n                this._renderBtnText(this._cachedData.product, this._cachedData.btn);\n            }\n        });\n    }\n    _update(product) {\n        this._cachedData.product = product;\n        this._cachedData.category.textContent = product.category;\n        this._cachedData.category.classList.add(getProductCategoryCssClass(product.category));\n        this._cachedData.title.textContent = product.title;\n        this._cachedData.img.alt = product.title;\n        this._cachedData.img.src = getCdnImgUrl(product.image);\n        this._cachedData.price.textContent = getProductPriceText(product.price);\n        const isInBasket = this._basketService.getById(product.id);\n        if (product.price === null) {\n            this._cachedData.btn.disabled = true;\n            this._cachedData.btn.textContent = 'Недоступно';\n        }\n        else {\n            this._cachedData.btn.textContent = isInBasket ? 'Удалить из корзины' : 'Купить';\n        }\n    }\n    _renderBtnText(product, btn) {\n        const isInBasket = this._basketService.getById(product.id);\n        if (isInBasket) {\n            this._basketService.remove(product);\n            btn.textContent = 'Купить';\n        }\n        else {\n            this._basketService.add(product);\n            btn.textContent = 'Удалить из корзины';\n        }\n    }\n}\n","import { CachedComponent } from \"./base/cached.component\";\n/**\n * Компонент формы ввода Email и телефона для оформления заказа.\n *\n * Основные принципы:\n * - Обновление данных в модели происходит непосредственно при событии `input`,\n *   то есть при каждом изменении пользовательского ввода.\n * - Валидация данных выполняется в модели (OrderService) и ValidationOrderService,\n *   представление (этот компонент) **не выполняет валидацию и не хранит данные формы**.\n * - Представление только отображает текущее состояние модели,\n *   включая ошибки валидации, полученные через подписку на события.\n * - Кнопка отправки формы блокируется/разблокируется в зависимости от валидности данных в модели.\n * - Передача данных между слоем представления и моделью(OrderService) происходит через StatefulEventEmitterService, который в свою очередь наследуется от базового EventEmitter, что обеспечивает реактивность и разделение ответственности.\n *\n * Это гарантирует, что форма заказа никак не зависит от корзины,\n * и не хранит собственное состояние — все данные централизованно управляются через OrderService\n */\nexport class EmailPhoneOrderComponent extends CachedComponent {\n    constructor(_orderService, _modalService, _basketService) {\n        super(document.querySelector('#contacts'));\n        this._orderService = _orderService;\n        this._modalService = _modalService;\n        this._basketService = _basketService;\n    }\n    _initCachedData() {\n        const emailErrorEl = document.createElement('span');\n        const phoneErrorEl = document.createElement('span');\n        const formErrors = this._cachedElement.querySelector('.form__errors');\n        formErrors.append(emailErrorEl, phoneErrorEl);\n        return {\n            inputEmail: this._cachedElement.querySelector('input[name=\"email\"]'),\n            inputPhone: this._cachedElement.querySelector('input[name=\"phone\"]'),\n            submitButton: this._cachedElement.querySelector('button[type=\"submit\"]'),\n            formErrors: formErrors,\n            emailErrorEl: emailErrorEl,\n            phoneErrorEl: phoneErrorEl\n        };\n    }\n    _afterInit() {\n        const { inputEmail, inputPhone, submitButton, emailErrorEl, phoneErrorEl } = this._cachedData;\n        this._cachedData.inputEmail.addEventListener('input', () => {\n            this._orderService.updateEmail(inputEmail.value);\n        });\n        inputPhone.addEventListener('input', () => {\n            this._orderService.updatePhone(inputPhone.value);\n        });\n        this._orderService.onFormStateChange(['email', 'phone'], (state) => {\n            var _a, _b;\n            emailErrorEl.innerHTML = `${(_a = state.errors.email) !== null && _a !== void 0 ? _a : ''}<br>`;\n            phoneErrorEl.innerHTML = (_b = state.errors.phone) !== null && _b !== void 0 ? _b : '';\n            submitButton.disabled = !state.isValid;\n        });\n        this._cachedElement.addEventListener('submit', (event) => {\n            event.preventDefault();\n            this._orderService.submit();\n            if (this._orderService.isValid) {\n                this._orderService.clear();\n                this._basketService.clear();\n            }\n        });\n        this._modalService.onCloseOnce(this, () => {\n            this._orderService.clear();\n        });\n    }\n    _clearElements() {\n        this._cachedData.inputEmail.value = '';\n        this._cachedData.inputPhone.value = '';\n        this._cachedData.submitButton.disabled = true;\n        this._cachedData.emailErrorEl.textContent = '';\n        this._cachedData.phoneErrorEl.textContent = '';\n    }\n    _update() {\n        this._clearElements();\n    }\n}\n","/**\n * Компонент галереи, отвечающий за отображение списка продуктов.\n *\n * Основная задача:\n * - Рендерить список продуктов, создавая для каждого карточку с помощью CardCatalogComponent\n *   и добавляя их в DOM-элемент галереи.\n */\nexport class GalleryComponent {\n    constructor(_cardCatalogComponent) {\n        this._cardCatalogComponent = _cardCatalogComponent;\n        this._galleryElement = document.querySelector('.gallery');\n    }\n    /**\n     * Создаёт и добавляет в галерею карточки продуктов.\n     *\n     * @param products - массив продуктов для отображения в галерее\n     */\n    renderProductList(products) {\n        this._galleryElement.innerHTML = '';\n        for (const product of products) {\n            const cardElement = this._cardCatalogComponent.render(product);\n            this._galleryElement.append(cardElement);\n        }\n    }\n}\n","/**\n * Компонент модального окна, отвечающий за отображение, открытие и закрытие модалки.\n *\n * Основные задачи:\n * - Вставка переданного контента в модальное окно.\n * - Управление видимостью модального окна и блокировка скролла страницы при открытии.\n * - Обработка событий закрытия: клик по крестику, клик вне содержимого (оверлей) и клавиша Escape.\n * - Подписка и отписка от событий при открытии и закрытии модального окна.\n */\nexport class ModalComponent {\n    constructor() {\n        this._openCallback = () => { };\n        this._closeCallback = () => { };\n        this._isOpen = false;\n        this._pointerDownInsideModal = false;\n        this._pointerUpInsideModal = false;\n        /**\n         * Закрывает модальное окно, снимает блокировку скролла и вызывает колбэк onClose.\n         */\n        this.close = () => {\n            if (!this._isOpen)\n                return;\n            this._modalContainerElement.classList.remove('modal_active');\n            document.body.classList.remove('page_overflow-hidden');\n            this._isOpen = false;\n            this._destroyEventListeners();\n            this._closeCallback();\n        };\n        /**\n         * Обработчик события pointerdown внутри модального окна,\n         * отслеживает попадание клика внутрь контента модалки.\n         * @param event - событие указателя\n         * @private\n         */\n        this._onPointerDown = (event) => {\n            this._pointerDownInsideModal = this._modalContentElement.contains(event.target);\n        };\n        /**\n         * Обработчик события pointerup внутри модального окна,\n         * отслеживает отпускание клика внутри модалки.\n         * @param event - событие указателя\n         * @private\n         */\n        this._onPointerUp = (event) => {\n            this._pointerUpInsideModal = this._modalContentElement.contains(event.target);\n        };\n        /**\n         * Обработчик клика по оверлею (фону модального окна).\n         * Закрывает модалку, если клик был именно по оверлею\n         * и pointerdown и pointerup не были внутри контента.\n         * @param event - событие мыши\n         * @private\n         */\n        this._closeByOverlay = (event) => {\n            // Клик по оверлею\n            if (event.target === this._modalContainerElement) {\n                // Закрываем только если pointerdown и pointerup были вне модалки\n                if (!this._pointerDownInsideModal && !this._pointerUpInsideModal) {\n                    this.close();\n                }\n            }\n        };\n        /**\n         * Обработчик события нажатия клавиши Escape для закрытия модального окна.\n         * @param event - событие клавиатуры\n         * @private\n         */\n        this._closeByEsc = (event) => {\n            if (event.key === 'Escape') {\n                this.close();\n            }\n        };\n        this._modalContainerElement = document.querySelector('#modal-container');\n        this._modalContentElement = this._modalContainerElement.querySelector('.modal__content');\n        this._modalCloseElement = this._modalContainerElement.querySelector('.modal__close');\n    }\n    /**\n     * Открывает модальное окно с указанным содержимым.\n     * Если модалка уже открыта, просто обновляет контент.\n     *\n     * @param content - DOM элемент, который будет вставлен в тело модального окна.\n     * @param options - Опциональные колбэки для событий открытия и закрытия.\n     */\n    open(content, options) {\n        var _a, _b;\n        const isAlreadyOpen = this._isOpen;\n        this._modalContentElement.textContent = '';\n        this._modalContentElement.appendChild(content);\n        this._openCallback = (_a = options === null || options === void 0 ? void 0 : options.onOpen) !== null && _a !== void 0 ? _a : (() => { });\n        this._closeCallback = (_b = options === null || options === void 0 ? void 0 : options.onClose) !== null && _b !== void 0 ? _b : (() => { });\n        if (!isAlreadyOpen) {\n            this._initEventListeners();\n            this._modalContainerElement.classList.add('modal_active');\n            document.body.classList.add('page_overflow-hidden');\n            this._isOpen = true;\n            this._openCallback();\n        }\n    }\n    /**\n     * Инициализирует обработчики событий для управления закрытием модального окна:\n     * клики по крестику, оверлею, а также клавиша Escape.\n     * @private\n     */\n    _initEventListeners() {\n        this._modalCloseElement.addEventListener('click', this.close);\n        this._modalContainerElement.addEventListener('pointerdown', this._onPointerDown);\n        this._modalContainerElement.addEventListener('pointerup', this._onPointerUp);\n        this._modalContainerElement.addEventListener('click', this._closeByOverlay);\n        window.addEventListener('keydown', this._closeByEsc);\n    }\n    /**\n     * Удаляет ранее добавленные обработчики событий.\n     * @private\n     */\n    _destroyEventListeners() {\n        this._modalCloseElement.removeEventListener('click', this.close);\n        this._modalContainerElement.removeEventListener('pointerdown', this._onPointerDown);\n        this._modalContainerElement.removeEventListener('pointerup', this._onPointerUp);\n        this._modalContainerElement.removeEventListener('click', this._closeByOverlay);\n        window.removeEventListener('keydown', this._closeByEsc);\n    }\n}\n","import { EventNames } from \"../../types\";\nimport { CachedComponent } from \"./base/cached.component\";\n/**\n * Компонент формы ввода адреса и выбора способа оплаты для оформления заказа.\n *\n * Основные принципы:\n * - Обновление данных модели происходит немедленно при событии `input` и переключении оплаты,\n *   то есть при каждом изменении пользовательского ввода или выборе метода оплаты.\n * - Валидация данных производится исключительно в модели (OrderService),\n *   этот компонент **не выполняет валидацию и не хранит состояние формы**.\n * - Представление отражает текущее состояние модели, включая ошибки валидации,\n *   которые поступают через подписку на события.\n * - Кнопка отправки блокируется или активируется в зависимости от валидности данных,\n *   предоставляемой моделью.\n * - Передача данных между представлением и моделью (OrderService) происходит через\n *   StatefulEventEmitterService, который наследует функциональность базового EventEmitter,\n *   что обеспечивает реактивность и чёткое разделение ответственности между слоями.\n *\n * Архитектура гарантирует, что форма заказа не зависит от корзины и не хранит локальное состояние —\n * все данные централизованно управляются через OrderService и распространяются посредством событий.\n */\nexport class PaymentAddressOrderComponent extends CachedComponent {\n    constructor(_orderService, _statefulEventEmitterService, _modalService) {\n        super(document.querySelector('#order'));\n        this._orderService = _orderService;\n        this._statefulEventEmitterService = _statefulEventEmitterService;\n        this._modalService = _modalService;\n    }\n    _initCachedData() {\n        return {\n            btnOnline: this._cachedElement.querySelector('[name=\"card\"]'),\n            btnOffline: this._cachedElement.querySelector('[name=\"cash\"]'),\n            inputAddress: this._cachedElement.querySelector('[name=\"address\"]'),\n            submitBtn: this._cachedElement.querySelector('.order__button'),\n            errors: this._cachedElement.querySelector('.form__errors'),\n            form: this._cachedElement\n        };\n    }\n    _afterInit() {\n        const { btnOnline, btnOffline, inputAddress, submitBtn, errors, form } = this._cachedData;\n        this._setPaymentMethod('online', btnOnline, btnOffline);\n        btnOnline.addEventListener('click', () => {\n            this._setPaymentMethod('online', btnOnline, btnOffline);\n        });\n        btnOffline.addEventListener('click', () => {\n            this._setPaymentMethod('offline', btnOnline, btnOffline);\n        });\n        inputAddress.addEventListener('input', () => {\n            this._orderService.setAddress(inputAddress.value);\n        });\n        this._orderService.onFormStateChange(['address'], (state) => {\n            var _a;\n            errors.textContent = (_a = state.errors.address) !== null && _a !== void 0 ? _a : '';\n            submitBtn.disabled = !state.isValid;\n        });\n        form.addEventListener('submit', (event) => {\n            event.preventDefault();\n            this._statefulEventEmitterService.emit(EventNames.OPEN_ORDER_EMAIL_PHONE);\n        });\n        // при закрытии модалки ручном (крестик, ESC) сбрасываем состояние заказа\n        this._modalService.onCloseOnce(this, () => {\n            this._orderService.clear();\n        });\n    }\n    _setPaymentMethod(currentMethod, btnOnline, btnOffline) {\n        this._orderService.setPaymentMethod(currentMethod);\n        this._updatePaymentButtonStyles(currentMethod, btnOnline, btnOffline);\n    }\n    _updatePaymentButtonStyles(method, btnOnline, btnOffline) {\n        btnOnline.classList.toggle('button_alt-active', method === 'online');\n        btnOffline.classList.toggle('button_alt-active', method === 'offline');\n    }\n    _update() {\n        const { btnOnline, btnOffline, submitBtn, inputAddress, errors } = this._cachedData;\n        this._setPaymentMethod('online', btnOnline, btnOffline);\n        inputAddress.value = '';\n        submitBtn.disabled = true;\n        errors.textContent = '';\n    }\n}\n","import { CachedComponent } from \"./base/cached.component\";\n/**\n * Компонент отображения успешного оформления заказа.\n *\n * Основные обязанности:\n * - Показывать информацию об успешно оформленном заказе, включая списанную сумму.\n * - Обеспечивать закрытие модального окна по клику на кнопку \"Закрыть\".\n * - Сброс состояния заказа и корзины при закрытии модального окна.\n */\nexport class SuccessOrderComponent extends CachedComponent {\n    constructor(_modalService) {\n        super(document.querySelector('#success'));\n        this._modalService = _modalService;\n    }\n    _initCachedData() {\n        return {\n            successOrderElement: this._cachedElement,\n            descriptionElement: this._cachedElement.querySelector('.order-success__description'),\n            successBtnElement: this._cachedElement.querySelector('.order-success__close')\n        };\n    }\n    _afterInit() {\n        const { successBtnElement } = this._cachedData;\n        successBtnElement.addEventListener('click', () => {\n            this._modalService.close(this);\n        });\n    }\n    _update(res) {\n        const { descriptionElement } = this._cachedData;\n        descriptionElement.textContent = `Списано ${res.total} синапсов`;\n    }\n}\n","import { AppController } from \"../../../app.controller\";\nimport { ApiOrderService } from \"../../../services/api-order.service\";\nimport { ApiProductsService } from \"../../../services/api-products.service\";\nimport { BasketService } from \"../../../services/basket.service\";\nimport { ComponentRegistryService } from \"../../../services/component-registry.service\";\nimport { ModalService } from \"../../../services/modal.service\";\nimport { OrderService } from \"../../../services/order.service\";\nimport { ProductsService } from \"../../../services/products.service\";\nimport { StatefulEventEmitterService } from \"../../../services/stateful-event-emitter.service\";\nimport { ValidationOrderService } from \"../../../services/validation-order.service\";\nimport { BasketCardComponent } from \"../basket-card.component\";\nimport { BasketHeaderComponent } from \"../basket-header.component\";\nimport { BasketComponent } from \"../basket.component\";\nimport { CardCatalogComponent } from \"../card-catalog.component\";\nimport { CardFullComponent } from \"../card-full.component\";\nimport { EmailPhoneOrderComponent } from \"../email-phone-order.component\";\nimport { GalleryComponent } from \"../gallery.component\";\nimport { ModalComponent } from \"../modal.component\";\nimport { PaymentAddressOrderComponent } from \"../payment-address-order.component\";\nimport { SuccessOrderComponent } from \"../succes-order.component\";\nimport { container } from \"./di-container\";\n/**\n * Регистрирует все необходимые зависимости в глобальном DI контейнере.\n *\n * Выполняет регистрацию сервисов, компонентов и контроллеров с указанием их зависимостей,\n * что позволяет контейнеру управлять созданием экземпляров и их инъекцией.\n *\n * Используется для единой централизованной настройки всех классов приложения,\n * чтобы при запросе нужного класса контейнер мог автоматически разрешить\n * и передать все необходимые зависимости.\n */\nexport function registerDependencies() {\n    container.register(ComponentRegistryService);\n    container.register(ApiOrderService);\n    container.register(ApiProductsService);\n    container.register(StatefulEventEmitterService);\n    container.register(ValidationOrderService);\n    container.register(ModalComponent);\n    container.register(ModalService, { deps: [ModalComponent, ComponentRegistryService] });\n    container.register(CardCatalogComponent, { deps: [StatefulEventEmitterService] });\n    container.register(GalleryComponent, { deps: [CardCatalogComponent] });\n    container.register(BasketHeaderComponent, { deps: [StatefulEventEmitterService] });\n    container.register(BasketService, { deps: [StatefulEventEmitterService] });\n    container.register(CardFullComponent, { deps: [BasketService] });\n    container.register(BasketCardComponent, { deps: [BasketService] });\n    container.register(BasketComponent, { deps: [BasketService, BasketCardComponent, StatefulEventEmitterService, ModalService] });\n    container.register(OrderService, { deps: [StatefulEventEmitterService, ValidationOrderService, ApiOrderService, BasketService] });\n    container.register(PaymentAddressOrderComponent, { deps: [OrderService, StatefulEventEmitterService, ModalService] });\n    container.register(EmailPhoneOrderComponent, { deps: [OrderService, ModalService, BasketService] });\n    container.register(SuccessOrderComponent, { deps: [ModalService] });\n    container.register(ProductsService, { deps: [ApiProductsService, StatefulEventEmitterService] });\n    container.register(AppController, {\n        deps: [\n            StatefulEventEmitterService,\n            ModalService,\n            GalleryComponent,\n            BasketHeaderComponent,\n            BasketService,\n            CardFullComponent,\n            BasketComponent,\n            PaymentAddressOrderComponent,\n            EmailPhoneOrderComponent,\n            SuccessOrderComponent,\n            ProductsService\n        ]\n    });\n}\n","import './scss/styles.scss';\nimport { AppController } from './app.controller';\nimport { registerDependencies } from './components/features/di/di-setup';\nimport { inject } from './components/features/di/di-inject';\n/**\n * Точка входа в приложение.\n *\n * Выполняет регистрацию всех зависимостей через функцию `registerDependencies`,\n * затем создаёт и инициализирует главный контроллер приложения `AppController`\n * с помощью DI-контейнера.\n *\n * Такой подход обеспечивает централизованное управление зависимостями\n * и структурированное начало работы приложения.\n */\nregisterDependencies();\nconst appController = inject(AppController);\nappController.init();\n"],"names":["EventNames","AppController","_statefulEventEmitterService","_modalService","_galleryComponent","_basketHeaderComponent","_basketService","_cardFullComponent","_basketComponent","_paymentAddressOrderComponent","_emailPhoneOrderComponent","_successOrderComponent","_productsService","_classCallCheck","this","_createClass","key","value","init","_loadProductsAndRender","_initCustomEventListeners","_this","getAll","products","renderProductList","_this2","on","OPEN_CARD_FULL","product","open","render","onBasket","setQuantityProductsInBasket","length","OPEN_CART","OPEN_ORDER_ADDRESS_PAYMENT","OPEN_ORDER_EMAIL_PHONE","OPEN_SUCCESS_ORDER","res","Api","baseUrl","_a","options","arguments","undefined","headers","Object","assign","get","uri","fetch","method","then","handleResponse","post","data","body","JSON","stringify","response","ok","json","Promise","reject","error","statusText","API_ORIGIN","API_URL","concat","CDN_URL","categoryCompareObj","ApiService","_Api","_inherits","_super","_createSuper","call","ApiOrderService","_ApiService","send","createOrderRequest","ApiProductsService","productsResponse","items","getById","id","BasketService","productsInBasket","getLast","BASKET","find","getPriceBasket","reduce","acc","price","add","item","emit","offAllByEventName","_toConsumableArray","remove","filteredProductsInBasket","filter","callback","offBasket","off","onBasketById","offBasketById","clear","isSelector","x","ensureElement","selectorElement","context","elements","ensureAllElements","document","Array","from","querySelectorAll","NodeList","isArray","Error","console","warn","pop","HTMLElement","getProductPriceText","getProductCategoryCssClass","category","categoryItem","getCdnImgUrl","img","ComponentRegistryService","_byInstance","WeakMap","_byElement","_listeners","Map","register","instance","element","_generateId","info","set","dataset","componentId","listeners","forEach","cb","getByInstance","getByElement","onRegisteredByInstance","has","Set","constructor","name","hashCode","obj","Math","random","toString","ModalService","_modalComponent","_componentRegistryService","_currentModal","_onCloseListeners","_pendingCloseListeners","_pendingCloseOnceListeners","_isProgrammaticClose","content","renderArgs","_resolveElement","_handleModalClose","_invokeRegularCloseCallbacks","onceListeners","_collectPendingOnceListeners","regularListeners","_collectPendingRegularListeners","component","_isComponent","onClose","onOpen","close","target","setTimeout","_getElementIfOpen","_addPendingListener","onCloseOnce","_this3","regular","modal","args","apply","storage","OrderService","_validationOrderService","_apiOrderService","order","_getCurrentOrder","validate","isValid","updateEmail","email","_emitOrderUpdate","updatePhone","phone","setAddress","address","setPaymentMethod","payment","clearLast","ORDER_CHANGED","onFormStateChange","fields","hasChanged","handler","some","field","result","submit","map","p","total","err","alert","errors","partialOrder","currentOrder","newOrder","ProductsService","_apiProductsService","onDestroy","_update","_callback","PRODUCTS_CHANGED","StatefulEventEmitterService","_EventEmitter","_lastValues","eventName","_get","_getPrototypeOf","prototype","_events","EventEmitter","size","subscribers","RegExp","test","onAll","offAll","trigger","event","ValidationOrderService","_step","_iterator","_createForOfIteratorHelper","s","n","done","_validateField","e","f","keys","DI_INIT","Symbol","container","DIContainer","_registry","_singletons","DIProvider","_b","_c","useClass","deps","inject","expectedLength","scope","resolve","dependencies","dep","_construct","BaseComponent","template","_template","_cloneTemplate","cloneTemplate","query","firstElementChild","cloneNode","_registerElement","StatelessComponent","_BaseComponent","BasketCardComponent","_StatelessComponent","querySelector","_deleteProduct","index","basketCardElement","basketItemIndexElemet","basketItemTitleElement","basketItemPriceElement","basketItemDeleteBtnElement","textContent","title","addEventListener","BasketHeaderComponent","_headerBasketElement","_counterElement","_initEventListeners","quantity","String","CachedComponent","_cachedElement","_cachedData","_initCachedData","_isRegistered","_afterInit","BasketComponent","_CachedComponent","_basketCardComponent","basketElement","listElement","priceElement","submitBtnElement","_this$_cachedData","renderAll","_renderActionsInfo","_appendBasketElements","onBasketCallback","i","appendChild","priceBasket","disabled","listItemEmptyElement","createElement","classList","CardCatalogComponent","_cardCatalogClick","cardCatalogElement","cardCategory","cardTitle","cardImg","cardPrice","alt","src","image","CardFullComponent","btn","_renderBtnText","isInBasket","EmailPhoneOrderComponent","_orderService","emailErrorEl","phoneErrorEl","formErrors","append","inputEmail","inputPhone","submitButton","state","innerHTML","preventDefault","_clearElements","GalleryComponent","_cardCatalogComponent","_galleryElement","cardElement","ModalComponent","_openCallback","_closeCallback","_isOpen","_pointerDownInsideModal","_pointerUpInsideModal","_modalContainerElement","_destroyEventListeners","_onPointerDown","_modalContentElement","contains","_onPointerUp","_closeByOverlay","_closeByEsc","_modalCloseElement","isAlreadyOpen","window","removeEventListener","PaymentAddressOrderComponent","btnOnline","btnOffline","inputAddress","submitBtn","form","_setPaymentMethod","currentMethod","_updatePaymentButtonStyles","toggle","_this$_cachedData2","SuccessOrderComponent","successOrderElement","descriptionElement","successBtnElement","registerDependencies"],"sourceRoot":""}